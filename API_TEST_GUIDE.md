# DeepSeek API 測試指南

## 🧪 測試工具說明

本專案提供了兩個測試工具來驗證 DeepSeek API 金鑰：

### 1. 快速測試工具 (`quick_test_api.py`)
- **用途**：快速驗證 API 金鑰是否有效
- **執行時間**：約 5-10 秒
- **測試內容**：基本連線和簡單對話測試

### 2. 完整測試工具 (`test_deepseek_api.py`)
- **用途**：全面測試 API 功能
- **執行時間**：約 30-60 秒
- **測試內容**：
  - API 金鑰格式驗證
  - 模型列表端點測試
  - 聊天完成端點測試
  - 速率限制測試
  - 錯誤處理測試

## 🚀 使用方法

### 快速測試（推薦）
```bash
python quick_test_api.py
```

### 完整測試
```bash
python test_deepseek_api.py
```

## 📋 測試結果說明

### ✅ 成功結果
```
🧪 DeepSeek API 快速測試
==============================
🔑 API 金鑰: sk-3640dcf...8d75
🔄 正在測試 API 連線...
✅ API 測試成功！
📝 回應: 這是一個簡單的測試訊息！收到請回覆～ 😊

🎉 API 金鑰有效，您的應用程式應該可以正常運作！
```

### ❌ 常見錯誤

#### 1. 環境變數未設定
```
❌ 錯誤: DEEPSEEK_API_KEY 環境變數未設定
請在 .env 檔案中設定您的 API 金鑰
```

**解決方案**：
1. 建立 `.env` 檔案
2. 加入：`DEEPSEEK_API_KEY=sk-your_actual_api_key_here`

#### 2. API 金鑰格式錯誤
```
❌ 錯誤: API 金鑰格式不正確，應以 'sk-' 開頭
```

**解決方案**：
- 確認 API 金鑰以 `sk-` 開頭
- 檢查金鑰是否完整複製

#### 3. API 金鑰無效
```
❌ API 金鑰無效或已過期
請檢查您的 API 金鑰是否正確
```

**解決方案**：
1. 重新生成 API 金鑰
2. 確認金鑰沒有過期
3. 檢查帳戶餘額

#### 4. 網路連線問題
```
❌ 網路連線錯誤，請檢查網路設定
```

**解決方案**：
1. 檢查網路連線
2. 確認防火牆設定
3. 嘗試使用 VPN

## 🔧 故障排除

### 問題 1：測試工具無法執行
**可能原因**：
- Python 環境問題
- 缺少依賴套件

**解決方案**：
```bash
# 安裝依賴
pip install requests python-dotenv

# 確認 Python 版本
python --version
```

### 問題 2：API 回應緩慢
**可能原因**：
- 網路連線慢
- DeepSeek 服務繁忙

**解決方案**：
- 稍後再試
- 檢查網路連線
- 使用更快的網路

### 問題 3：測試通過但應用程式仍無法運作
**可能原因**：
- 環境變數設定問題
- 應用程式配置錯誤

**解決方案**：
1. 確認 `.env` 檔案在正確位置
2. 重新啟動應用程式
3. 檢查應用程式日誌

## 📝 測試腳本功能

### `quick_test_api.py` 功能
- ✅ 檢查環境變數
- ✅ 驗證 API 金鑰格式
- ✅ 測試基本連線
- ✅ 執行簡單對話測試
- ✅ 提供詳細錯誤訊息

### `test_deepseek_api.py` 功能
- ✅ 所有快速測試功能
- ✅ 模型列表驗證
- ✅ 多項功能測試
- ✅ 速率限制測試
- ✅ 錯誤處理測試
- ✅ 詳細測試報告

## 🎯 最佳實踐

1. **定期測試**：建議每週執行一次測試
2. **部署前測試**：在部署到生產環境前務必測試
3. **問題診斷**：遇到問題時先執行測試工具
4. **備份金鑰**：保存多個有效的 API 金鑰

## 📞 支援

如果測試工具無法解決您的問題，請：

1. 檢查 [DeepSeek 官方文檔](https://platform.deepseek.com/docs)
2. 查看 [DeepSeek 狀態頁面](https://status.deepseek.com)
3. 聯繫 DeepSeek 技術支援

---

**注意**：測試工具僅用於驗證 API 金鑰，不會消耗大量 Token。 